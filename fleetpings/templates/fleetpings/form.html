{% load bootstrap %}
{% load i18n %}

<form id="aa-fleetping-form" class="form-horizontal">
    {% csrf_token %}
    <fieldset class="aa-fleetpings-form">
        <!-- ping_target -->
        {{ form.ping_target|bootstrap_horizontal }}

        <!-- ping_channel -->
        {% if webhooks_configured %}
            {{ form.ping_channel|bootstrap_horizontal }}
        {% endif %}

        <!-- fleet_type -->
        {{ form.fleet_type|bootstrap_horizontal }}

        <!-- fleet_commander -->
        {{ form.fleet_commander|bootstrap_horizontal }}

        <!-- fleet_name -->
        {{ form.fleet_name|bootstrap_horizontal }}

        <!-- formup_location -->
        {{ form.formup_location|bootstrap_horizontal }}

        <!-- pre_ping -->
        {{ form.pre_ping|bootstrap_horizontal }}

        <!-- formup_time -->
        {{ form.formup_time|bootstrap_horizontal }}

        <!-- optimer -->
        {% if optimer_installed %}
            <div class="fleetpings-create-optimer clearfix" style="display: none;">
                {{ form.optimer|bootstrap_horizontal }}
            </div>
        {% endif %}

        {{ form.formup_now|bootstrap_horizontal }}

        <!-- fleet_comms -->
        {{ form.fleet_comms|bootstrap_horizontal }}

        <!-- fleet_doctrine -->
        {{ form.fleet_doctrine|bootstrap_horizontal }}

        <!-- srp -->
        {{ form.srp|bootstrap_horizontal }}

        <!-- srp_link -->
        {% if srp_module_available_to_user %}
            <div class="fleetpings-create-srp-link clearfix" style="display: none;">
                {{ form.srp_link|bootstrap_horizontal }}
            </div>
        {% endif %}

        <!-- additional_information -->
        {{ form.additional_information|bootstrap_horizontal }}

        <div class="form-group clearfix">
            <div class=" col-sm-offset-2 col-sm-10 col-lg-offset-2 col-lg-10">
                <button id="createPingText" name="createPingText" class="btn btn-primary">{% translate "Create Ping" %}</button>
            </div>
        </div>
    </fieldset>
</form>

<script type="application/javascript">
    const fleetpingsSettings = {
        dateTimeLocale: '{{ LANGUAGE_CODE }}',
        timezonesInstalled: {{ timezones_installed|yesno:"true,false" }},
        optimerInstalled: {{ optimer_installed|yesno:"true,false" }},
        srpModuleAvailableToUser: {{ srp_module_available_to_user|yesno:"true,false" }},
        pingCreator: '{{ main_character|safe|addslashes }}',
        url: {
            siteUrl: '{{ site_url }}/',
            fleetPingUrl: '{% url "fleetpings:ajax_create_fleet_ping" %}',
            pingTargets: '{% url "fleetpings:ajax_get_ping_targets" %}',
            pingWebhooks: '{% url "fleetpings:ajax_get_webhooks" %}',
            fleetTypes: '{% url "fleetpings:ajax_get_fleet_types" %}',
            formupLocations: '{% url "fleetpings:ajax_get_formup_locations" %}',
            fleetComms: '{% url "fleetpings:ajax_get_fleet_comms" %}',
            fleetDoctrines: '{% url "fleetpings:ajax_get_fleet_doctrines" %}'
        }
    };
</script>
